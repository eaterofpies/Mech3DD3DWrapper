#include "Util.h"
FILE* logfd = 0;

#define DUMPENUM(EN) \
case EN : DPRINTF(#EN); break

#define DUMPRS(RS) \
case RS : DPRINTF(#RS " %x", val); break

void PrintRect(RECT* r)
{
	DPRINTF("l %d, t %d, r %d, b %d", r->left, r->top, r->right, r->bottom);
}

void PrintSurfaceDesc(DDSURFACEDESC* desc)
{
	DPRINTF
	(
		"size %d\n"
		"flags %x\n"
		"height %d\n"
		"width %d\n"
		"pitch %d\n"
		"linearsize %d\n"
		"backbuffercount %d\n"
		"mipmap count / zbuf depth / refreshrate %d\n"
		"alpha depth %d\n"
		"surface %x\n"
		"color keys\ndestoverlay %x\n"
		"destblt %x\n"
		"srcoverlay %x\n"
		"srcblt %x\n"
		"pixelformat %x\n"
		"caps %x",
		desc->dwSize,
		desc->dwFlags,
		desc->dwHeight,
		desc->dwWidth,
		desc->lPitch,
		desc->dwLinearSize,
		desc->dwBackBufferCount,
		desc->dwMipMapCount,
		desc->dwAlphaBitDepth,
		desc->lpSurface,
		desc->ddckCKDestOverlay,
		desc->ddckCKDestBlt,
		desc->ddckCKSrcOverlay,
		desc->ddckCKSrcBlt,
		desc->ddpfPixelFormat,
		desc->ddsCaps.dwCaps
	);
}
void PrintHresult(HRESULT h)
{
		switch(h)
		{
			DUMPENUM(DD_OK);
			DUMPENUM(DDERR_INCOMPATIBLEPRIMARY);
			DUMPENUM(DDERR_INVALIDCAPS);
			DUMPENUM(DDERR_INVALIDOBJECT);
			DUMPENUM(DDERR_INVALIDPARAMS);
			DUMPENUM(DDERR_INVALIDPIXELFORMAT);
			DUMPENUM(DDERR_NOALPHAHW);
			DUMPENUM(DDERR_NOCOOPERATIVELEVELSET);
			DUMPENUM(DDERR_NODIRECTDRAWHW);
			DUMPENUM(DDERR_NOEMULATION);
			DUMPENUM(DDERR_NOEXCLUSIVEMODE);
			DUMPENUM(DDERR_NOFLIPHW);
			DUMPENUM(DDERR_NOMIPMAPHW);
			DUMPENUM(DDERR_NOOVERLAYHW);
			DUMPENUM(DDERR_NOZBUFFERHW);
			DUMPENUM(DDERR_OUTOFMEMORY);
			DUMPENUM(DDERR_OUTOFVIDEOMEMORY);
			DUMPENUM(DDERR_PRIMARYSURFACEALREADYEXISTS);
			DUMPENUM(DDERR_UNSUPPORTEDMODE);
			default:
				DPRINTF("unknown hresult %x", h);
				ABORT();
		}
}

void PrintRenderstate(D3DRENDERSTATETYPE rs, DWORD val)
{
	switch(rs)
	{
		DUMPRS(D3DRENDERSTATE_TEXTUREHANDLE);
		DUMPRS(D3DRENDERSTATE_ANTIALIAS);
		DUMPRS(D3DRENDERSTATE_TEXTUREADDRESS);
		DUMPRS(D3DRENDERSTATE_TEXTUREPERSPECTIVE);
		DUMPRS(D3DRENDERSTATE_WRAPU);
		DUMPRS(D3DRENDERSTATE_WRAPV);
		DUMPRS(D3DRENDERSTATE_ZENABLE);
		DUMPRS(D3DRENDERSTATE_FILLMODE);
		DUMPRS(D3DRENDERSTATE_SHADEMODE);
		DUMPRS(D3DRENDERSTATE_LINEPATTERN);
		DUMPRS(D3DRENDERSTATE_MONOENABLE);
		DUMPRS(D3DRENDERSTATE_ROP2);
		DUMPRS(D3DRENDERSTATE_PLANEMASK);
		DUMPRS(D3DRENDERSTATE_ZWRITEENABLE);
		DUMPRS(D3DRENDERSTATE_ALPHATESTENABLE);
		DUMPRS(D3DRENDERSTATE_LASTPIXEL);
		DUMPRS(D3DRENDERSTATE_TEXTUREMAG);
		DUMPRS(D3DRENDERSTATE_TEXTUREMIN);
		DUMPRS(D3DRENDERSTATE_SRCBLEND);
		DUMPRS(D3DRENDERSTATE_DESTBLEND);
		DUMPRS(D3DRENDERSTATE_TEXTUREMAPBLEND);
		DUMPRS(D3DRENDERSTATE_CULLMODE);
		DUMPRS(D3DRENDERSTATE_ZFUNC);
		DUMPRS(D3DRENDERSTATE_ALPHAREF);
		DUMPRS(D3DRENDERSTATE_ALPHAFUNC);
		DUMPRS(D3DRENDERSTATE_DITHERENABLE);
		DUMPRS(D3DRENDERSTATE_ALPHABLENDENABLE);
		DUMPRS(D3DRENDERSTATE_FOGENABLE);
		DUMPRS(D3DRENDERSTATE_SPECULARENABLE);
		DUMPRS(D3DRENDERSTATE_ZVISIBLE);
		DUMPRS(D3DRENDERSTATE_SUBPIXEL);
		DUMPRS(D3DRENDERSTATE_SUBPIXELX);
		DUMPRS(D3DRENDERSTATE_STIPPLEDALPHA);
		DUMPRS(D3DRENDERSTATE_FOGCOLOR);
		DUMPRS(D3DRENDERSTATE_FOGTABLEMODE);
		DUMPRS(D3DRENDERSTATE_FOGSTART);
		DUMPRS(D3DRENDERSTATE_FOGEND);
		DUMPRS(D3DRENDERSTATE_FOGDENSITY);
		DUMPRS(D3DRENDERSTATE_STIPPLEENABLE);
		DUMPRS(D3DRENDERSTATE_EDGEANTIALIAS);
		DUMPRS(D3DRENDERSTATE_COLORKEYENABLE);
		DUMPRS(D3DRENDERSTATE_BORDERCOLOR);
		DUMPRS(D3DRENDERSTATE_TEXTUREADDRESSU);
		DUMPRS(D3DRENDERSTATE_TEXTUREADDRESSV);
		DUMPRS(D3DRENDERSTATE_MIPMAPLODBIAS);
		DUMPRS(D3DRENDERSTATE_ZBIAS);
		DUMPRS(D3DRENDERSTATE_RANGEFOGENABLE);
		DUMPRS(D3DRENDERSTATE_ANISOTROPY);
		DUMPRS(D3DRENDERSTATE_FLUSHBATCH);
		DUMPRS(D3DRENDERSTATE_TRANSLUCENTSORTINDEPENDENT);

		DUMPRS(D3DRENDERSTATE_STENCILENABLE);
		DUMPRS(D3DRENDERSTATE_STENCILFAIL);
		DUMPRS(D3DRENDERSTATE_STENCILZFAIL);
		DUMPRS(D3DRENDERSTATE_STENCILPASS);
		DUMPRS(D3DRENDERSTATE_STENCILFUNC);
		DUMPRS(D3DRENDERSTATE_STENCILREF);
		DUMPRS(D3DRENDERSTATE_STENCILMASK);
		DUMPRS(D3DRENDERSTATE_STENCILWRITEMASK);
		DUMPRS(D3DRENDERSTATE_TEXTUREFACTOR);

		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN00);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN01);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN02);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN03);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN04);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN05);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN06);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN07);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN08);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN09);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN10);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN11);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN12);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN13);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN14);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN15);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN16);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN17);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN18);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN19);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN20);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN21);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN22);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN23);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN24);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN25);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN26);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN27);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN28);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN29);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN30);
		DUMPRS(D3DRENDERSTATE_STIPPLEPATTERN31);

		DUMPRS(D3DRENDERSTATE_WRAP0);
		DUMPRS(D3DRENDERSTATE_WRAP1);
		DUMPRS(D3DRENDERSTATE_WRAP2);
		DUMPRS(D3DRENDERSTATE_WRAP3);
		DUMPRS(D3DRENDERSTATE_WRAP4);
		DUMPRS(D3DRENDERSTATE_WRAP5);
		DUMPRS(D3DRENDERSTATE_WRAP6);
		DUMPRS(D3DRENDERSTATE_WRAP7);
		DUMPRS(D3DRENDERSTATE_CLIPPING);
		DUMPRS(D3DRENDERSTATE_LIGHTING);
		DUMPRS(D3DRENDERSTATE_EXTENTS);
		DUMPRS(D3DRENDERSTATE_AMBIENT);
		DUMPRS(D3DRENDERSTATE_FOGVERTEXMODE);
		DUMPRS(D3DRENDERSTATE_COLORVERTEX);
		DUMPRS(D3DRENDERSTATE_LOCALVIEWER);
		DUMPRS(D3DRENDERSTATE_NORMALIZENORMALS);
		DUMPRS(D3DRENDERSTATE_COLORKEYBLENDENABLE);
		DUMPRS(D3DRENDERSTATE_DIFFUSEMATERIALSOURCE);
		DUMPRS(D3DRENDERSTATE_SPECULARMATERIALSOURCE);
		DUMPRS(D3DRENDERSTATE_AMBIENTMATERIALSOURCE);
		DUMPRS(D3DRENDERSTATE_EMISSIVEMATERIALSOURCE);
		DUMPRS(D3DRENDERSTATE_VERTEXBLEND);
		DUMPRS(D3DRENDERSTATE_CLIPPLANEENABLE);

		DUMPRS(D3DRENDERSTATE_FORCE_DWORD);
		default: DPRINTF("unknown");
	}
}
